## 信息
时间 : 2016/12/9 15:54:05   
参考文章 ：  

1. [ssl-howto](http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html)
2. [Apache Web Server](https://startssl.com/Support?v=21)

## 注册

1. 注册网站 : [https://www.startssl.com/](https://www.startssl.com/) 。

2. 使用邮箱登录网站。  

3. 登录完成之后点击顶部 的 `Control Panel`, 在页面的选项卡里面选择 `Validations Wizard` ,然后选择 ` Domain Validation (for SSL certificate)` ,之后点击 `Continue`。

4. 输入域名点击继续。（注意为了邮件可以正常发送到你的邮箱，需要关闭 `域名保护`）。  

5. 选择邮箱发送验证码，填入收到的验证码即可验证成功。

## 下载证书资料
1. 点击顶部 的 `Control Panel`, 在页面的选项卡里面选择 `Certificates Wizard`,在后面的 `Free User (Not Validated)` 里面点击 `DV SSL Certificate`, 在上面的输入框输入你的域名(以 `sunfielong1993.club` 为例)， 下面一个选择 `Generated by Myself   (.cer PEM format certificate)`，之后下载 ` StartComTool.exe` 初始化自己 `csr`。下载 ` StartComTool.exe` 之后，选择 `csr`，然后点击 `Generate CSR`,之后把生成的内容拷贝到网页上的输入框即可。
2. 点击提交之后跳转的新页面有一个下载文 `certificate` 的链接，点击即可下载网站的证书。

## Apache Tomcat 使用 HTTPS（Windows）
1. 下载对应版本的 [tomcat-native](http://archive.apache.org/dist/tomcat/tomcat-connectors/native/).( `apache-tomcat-8.0.32` 对应 `tomcat-native` 版本是 1.1.32)。  

2. windows 下载 `tomcat-native-1.1.32-ocsp-win32-bin.zip` 文件， 解压之后根据自己的电脑选择合适的 `.dll` 文件（i64 是intel处理器， x64 是amd处理器）， 之后把 `.dll` 文件放入到 `tomcat` 使用的 `jdk` 的 `bin` 目录下。

3. 修改 `tomcat` 的 `server.xml`，找到 `8443` 端口，添加或者替换如下内容。

        <Connector
               protocol="org.apache.coyote.http11.Http11AprProtocol"
               port="8443" maxThreads="200"
               scheme="https" secure="true" SSLEnabled="true"
               SSLCertificateFile="D:\future\apache-tomcat-8.0.32\conf\2_sunfielong1993.club.crt"
    		   SSLCertificateKeyFile="D:\future\apache-tomcat-8.0.32\conf\sunfielong1993.key"
               SSLCertificateChainFile="D:\future\apache-tomcat-8.0.32\conf\1_root_bundle.crt"
               SSLVerifyClient="optional" SSLProtocol="TLSv1+TLSv1.1+TLSv1.2"/>

    参数说明:

    * SSLCertificateFile 是 上面下载的安全证书
    * SSLCertificateKeyFile 是 `StartComTool.exe` 生成的 `private key` 文件。

## 通过域名访问
1. 双击安装下载的证书 `1_root_bundle.crt` 和 `2_sunfielong1993.club.crt`。
2. 修改host文件
        
        //前面的ip是本机的ip地址
        192.168.2.106   sunfielong1993.club
3. 刷新host文件 `ipconfig /flushdns`
4. 启动tomcat。
5. 输入网址访问项目 `https://sunfielong1993.club:8443/`, 会发现网址前面有一个绿色的锁。


