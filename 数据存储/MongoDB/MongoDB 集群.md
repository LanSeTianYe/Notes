时间：2019/8/12 22:44:34  

## MongoDB 集群  

### 集群简介  
数据集：一个复制集中的 `MongoDB实例` 里面的数据是完全一样的，集群之间通过Leader选举产生，主节点（Leader） 负责数据的写入，从节点从主节点复制数据，作为备份，当主节点挂机之后，从节点会自动提升为主节点，前提是复制集中多数节点存活，生产环境推荐至少3个节点。主节点、从节点和裁判节点。

数据分片：分片是把集合中的数据路由到不同的分片，选择分片的依据是分片key，指定分片key的时候要充分考虑如下几个方面：

* 查询：统一个查询的数据最好可以路由到一个分片上。
* 数据均匀分布：数据要尽量均匀分布在不同分片上。
* 其他。

在分片模式下，要求 `3个mongos路由节点`、`3个配置节点`、`每个分片都以一个复制集的形式存在`。